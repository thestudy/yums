<script src="../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../../bower_components/paper-badge/paper-badge.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<dom-module id="user-menu">
    
    <style>
        #main{
            word-wrap: break-word;
            text-overflow: ellipsis;
            overflow: hidden;
        }
        
        #expand{
            margin-top: 7.5px;
        }
        
        
        .purple{
            background-color: var(--paper-indigo-500);
            
        }
        .button{
            color: white;
            
        }
        .purp{
            @apply(--paper-font-common-base);
            --accent-color: var(--paper-indigo-500);
            --paper-badge-margin-left: 25px;
            --paper-badge-margin-right: 60px;
        }
        .content{
            text-overflow: ellipsis;
            overflow: hidden;
        }
        
        paper-item[disabled]{
            opacity: 1;
            color: black;
        }
        .red{
            float: right;
            @apply(--paper-font-common-base);
            background-color: var(--paper-red-500);
        }
        .green{
            background-color: var(--paper-blue-500);
            vertical-align: 20px;
        }
        .notific{
            vertical-align: 25px;
        }
        
    </style>
    
    <template>
        <div id='main'>
            <paper-toolbar id="menu" style="width: 100%;">
                <div style="float: left; width: 95%;">
                    <paper-icon-button title="Modules" id='mods' icon="apps" class="button" style="width: 60px; height: 60px;" on-click="expandModuleMenu"></paper-icon-button>
                    <paper-icon-button id="expand" icon="social:notifications" on-tap="expandMenu" style="width: 45px; height: 45px;"></paper-icon-button>
                    <paper-badge id='not' for="expand" label="{{notifications.length}}"> </paper-badge>
                </div>
                <div style="width: 5%; float: right;">
                     <paper-button class="red" on-click="logout">LOGOFF</paper-button>
                </div>
            
            </paper-toolbar>
            <iron-collapse id="roles" class="purple" style="width:100%; height: 20%;">
                <div class="purple">
                            <div >
                                <paper-item disabled style="float: left; color: white;"> Notifications</paper-item>
                                
                                    
                                        <template is="dom-repeat" items="{{notifications}}">
                                            <paper-card style="width: 300px;" on-click='removeNotification' on-mouseover='expandNotification' on-mouseout='collapseNotification'>
                                                <div class="card-content"  class="content">
                                                    <paper-item  disabled class='notfic' style="float: left;" >{{item}}</paper-item>
                                                    <br>
                                                    
                                                </div>
                                                <iron-collapse id='hey' style="background-color: white;">
                                                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus in lobortis lectus, non aliquam tortor. Praesent vitae blandit dolor. Etiam aliquet lobortis laoreet. Integer ut ex eget tortor venenatis feugiat mollis sed neque. Aenean justo nulla, efficitur eu convallis sollicitudin, interdum at augue. Nulla condimentum mollis tristique. Aenean sit amet turpis sapien. Quisque aliquam est mi, non tincidunt eros bibendum ac. </p>
                                                    </iron-collapse>
                                            </paper-card>
                                        </template>
    
                            </div>
                            <br>
                </div>
            </iron-collapse>
            <iron-collapse id="modules" class="purple" style="width:100%; height: 20%;">
                <div class="purple" style="float: left;">
                    <paper-icon-button title="Modules" id='mods' icon="schedule" class="button" style="width: 80px; height: 80px;"></paper-icon-button>
                    <paper-icon-button title="Modules" id='mods' icon="today" class="button" style="width: 80px; height: 80px;"></paper-icon-button>
                    <paper-icon-button title="Modules" id='mods' icon="view-module" class="button" style="width: 80px; height: 80px;"></paper-icon-button>
                </div>
            </iron-collapse>
        </div>
        
    </template>
    
    <script>
        Polymer({
            is: "user-menu",
            
            properties:{
                notifications: Array
            },
            
            logout: function(){
                console.log('logging out')
                this.fire('log-out');
            },
            
            ready: function(){
              this.notifications = ['etc', 'fill out schedule', 'do report', 'lorem ipsum pppppppp ppppp kjjj'];
                
            },
            
            removeNotification: function(e){
                var idx = e.model.index;
                this.notifications.splice(idx, 1);
                var temp = this.notifications.slice(0);
                this.notifications = temp;
                
                if(this.notifications.length == 0){
                    document.getElementById('not').style.display = 'none';
                    document.getElementById('notCard').style.display = 'none';
                }
            },
            
            expandMenu: function() {
                var roles = document.getElementById('roles');
                roles.toggle();

            },
            
            expandModuleMenu: function(){
                var collapse = document.getElementById('modules');
                collapse.toggle();
            },
            
            expandNotification: function(){
                var collapse = document.getElementById('hey');
                collapse.toggle();
            },
            
            collapseNotification: function(){
                var collapse = document.getElementById('hey');
                collapse.toggle();
            }
        })
    </script>
    
</dom-module>